# Default values for qui-browser.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# Application configuration
replicaCount: 3

image:
  repository: ghcr.io/qui-browser/qui-browser
  pullPolicy: IfNotPresent
  tag: "latest"

# Service configuration
service:
  type: ClusterIP
  port: 80
  targetPort: 8000

# Ingress configuration
ingress:
  enabled: true
  className: ""
  annotations:
    kubernetes.io/ingress.class: nginx
    cert-manager.io/cluster-issuer: letsencrypt-prod
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/rate-limit: "100"
    nginx.ingress.kubernetes.io/rate-limit-window: "1m"
  hosts:
    - host: api.qui-browser.com
      paths:
        - path: /
          pathType: Prefix
  tls:
    - secretName: qui-browser-tls
      hosts:
        - api.qui-browser.com

# Resource limits and requests
resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 256Mi

# Node selector
nodeSelector: {}

# Tolerations
tolerations: []

# Affinity
affinity: {}

# Persistence configuration
persistence:
  enabled: true
  storageClass: ""
  accessMode: ReadWriteOnce
  size: 10Gi
  uploads:
    mountPath: /app/uploads
  logs:
    mountPath: /app/logs

# Application environment variables
env:
  NODE_ENV: "production"
  PORT: "8000"
  HOST: "0.0.0.0"
  ENABLE_DATABASE: "false"
  ENABLE_SECURITY_HEADERS: "true"
  ENABLE_CORS: "true"
  ENABLE_RATE_LIMITING: "true"
  ENABLE_COMPRESSION: "true"
  ENABLE_FILE_CACHE: "true"
  ENABLE_MONITORING: "true"
  ENABLE_I18N: "true"
  ENABLE_FILE_UPLOAD: "true"
  DEFAULT_LANGUAGE: "en"
  LIGHTWEIGHT: "false"

# Secrets (override in production)
secrets:
  billingAdminToken: "change-me-in-production"
  databasePassword: "secure-db-password"
  jwtSecret: "super-secret-jwt-key"

# Database configuration (optional)
database:
  enabled: false
  type: "postgresql"
  host: ""
  port: 5432
  name: "qui_browser"
  user: ""
  ssl: false

# Monitoring configuration
monitoring:
  enabled: true
  prometheus:
    enabled: false
  grafana:
    enabled: false

# Autoscaling configuration
autoscaling:
  enabled: true
  minReplicas: 3
  maxReplicas: 10
  targetCPUUtilizationPercentage: 70
  targetMemoryUtilizationPercentage: 80

# Pod disruption budget
podDisruptionBudget:
  enabled: true
  minAvailable: 2

# Health check configuration
healthCheck:
  enabled: true
  livenessProbe:
    initialDelaySeconds: 30
    periodSeconds: 10
    timeoutSeconds: 5
    failureThreshold: 3
  readinessProbe:
    initialDelaySeconds: 5
    periodSeconds: 5
    timeoutSeconds: 3
    failureThreshold: 3
