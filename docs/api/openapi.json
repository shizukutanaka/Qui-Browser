{
  "openapi": "3.0.3",
  "info": {
    "title": "Qui Browser API",
    "description": "Comprehensive API for Qui Browser - A lightweight, secure web browser server with VR/WebXR support",
    "version": "1.1.0",
    "contact": {
      "name": "Qui Browser Team",
      "url": "https://github.com/qui-browser",
      "email": "team@qui-browser.com"
    },
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    }
  },
  "servers": [
    {
      "url": "http://localhost:8000",
      "description": "Development server"
    },
    {
      "url": "https://api.qui-browser.com",
      "description": "Production server"
    }
  ],
  "security": [
    {
      "bearerAuth": []
    },
    {
      "apiKeyAuth": []
    }
  ],
  "paths": {
    "/health": {
      "get": {
        "summary": "Health Check",
        "description": "Get system health status and metrics",
        "tags": ["System"],
        "responses": {
          "200": {
            "description": "System health information",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthResponse"
                }
              }
            }
          }
        }
      }
    },
    "/metrics": {
      "get": {
        "summary": "Prometheus Metrics",
        "description": "Get system metrics in Prometheus format",
        "tags": ["System", "Monitoring"],
        "responses": {
          "200": {
            "description": "Prometheus metrics",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string",
                  "description": "Prometheus formatted metrics"
                }
              }
            }
          }
        }
      }
    },
    "/api/bookmarks": {
      "get": {
        "summary": "Get Bookmarks",
        "description": "Retrieve all bookmarks for the authenticated user",
        "tags": ["Bookmarks"],
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "List of bookmarks",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Bookmark"
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      },
      "post": {
        "summary": "Add Bookmark",
        "description": "Create a new bookmark",
        "tags": ["Bookmarks"],
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BookmarkInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Bookmark created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Bookmark"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/bookmarks/{bookmarkId}": {
      "delete": {
        "summary": "Delete Bookmark",
        "description": "Delete a specific bookmark",
        "tags": ["Bookmarks"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "bookmarkId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Bookmark ID"
          }
        ],
        "responses": {
          "204": {
            "description": "Bookmark deleted"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/history": {
      "get": {
        "summary": "Get Browsing History",
        "description": "Retrieve browsing history with optional filters",
        "tags": ["History"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 1000,
              "default": 100
            },
            "description": "Maximum number of items to return"
          },
          {
            "name": "offset",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 0,
              "default": 0
            },
            "description": "Number of items to skip"
          }
        ],
        "responses": {
          "200": {
            "description": "List of history entries",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/HistoryEntry"
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      },
      "delete": {
        "summary": "Clear History",
        "description": "Delete all browsing history for the user",
        "tags": ["History"],
        "security": [{"bearerAuth": []}],
        "responses": {
          "204": {
            "description": "History cleared"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/tabs": {
      "get": {
        "summary": "Get Tabs",
        "description": "Retrieve all open tabs",
        "tags": ["Tabs"],
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "List of tabs",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Tab"
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      },
      "post": {
        "summary": "Create Tab",
        "description": "Create a new tab",
        "tags": ["Tabs"],
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TabInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Tab created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Tab"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/tabs/active": {
      "put": {
        "summary": "Set Active Tab",
        "description": "Set the active/focused tab",
        "tags": ["Tabs"],
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["tabId"],
                "properties": {
                  "tabId": {
                    "type": "string",
                    "description": "ID of the tab to make active"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Active tab updated"
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/tabs/{tabId}": {
      "delete": {
        "summary": "Close Tab",
        "description": "Close a specific tab",
        "tags": ["Tabs"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "tabId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Tab ID"
          }
        ],
        "responses": {
          "204": {
            "description": "Tab closed"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/sessions": {
      "get": {
        "summary": "Get Sessions",
        "description": "Retrieve all saved sessions",
        "tags": ["Sessions"],
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "List of sessions",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Session"
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      },
      "post": {
        "summary": "Save Session",
        "description": "Save current session state",
        "tags": ["Sessions"],
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SessionInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Session saved",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Session"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/sessions/{sessionId}/restore": {
      "put": {
        "summary": "Restore Session",
        "description": "Restore a saved session",
        "tags": ["Sessions"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "sessionId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Session restored",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Session"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/sessions/{sessionId}": {
      "delete": {
        "summary": "Delete Session",
        "description": "Delete a saved session",
        "tags": ["Sessions"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "sessionId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Session ID"
          }
        ],
        "responses": {
          "204": {
            "description": "Session deleted"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/settings": {
      "get": {
        "summary": "Get Settings",
        "description": "Retrieve user settings",
        "tags": ["Settings"],
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "User settings",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Settings"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      },
      "put": {
        "summary": "Update Settings",
        "description": "Update user settings",
        "tags": ["Settings"],
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Settings"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Settings updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Settings"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/search": {
      "get": {
        "summary": "Search",
        "description": "Search across bookmarks, history, and tabs",
        "tags": ["Search"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "minLength": 1,
              "maxLength": 100
            },
            "description": "Search query"
          },
          {
            "name": "type",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["bookmarks", "history", "tabs", "all"],
              "default": "all"
            },
            "description": "Type of content to search"
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 100,
              "default": 50
            },
            "description": "Maximum number of results"
          }
        ],
        "responses": {
          "200": {
            "description": "Search results",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SearchResults"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/upload": {
      "post": {
        "summary": "Upload Files",
        "description": "Upload one or more files",
        "tags": ["Files"],
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "files": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "binary"
                    },
                    "description": "Files to upload"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Files uploaded successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UploadResponse"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/files": {
      "get": {
        "summary": "List Files",
        "description": "List uploaded files with optional filters",
        "tags": ["Files"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "extension",
            "in": "query",
            "schema": {
              "type": "string",
              "description": "Filter by file extension"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "minimum": 1,
              "maximum": 1000,
              "default": 100
            },
            "description": "Maximum number of files to return"
          }
        ],
        "responses": {
          "200": {
            "description": "List of files",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "files": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/FileInfo"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/files/{fileId}": {
      "get": {
        "summary": "Download File",
        "description": "Download a specific file",
        "tags": ["Files"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "fileId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "File ID"
          }
        ],
        "responses": {
          "200": {
            "description": "File download",
            "content": {
              "application/octet-stream": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      },
      "delete": {
        "summary": "Delete File",
        "description": "Delete a specific file",
        "tags": ["Files"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "fileId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "File ID"
          }
        ],
        "responses": {
          "204": {
            "description": "File deleted"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/api/billing/preview": {
      "get": {
        "summary": "Billing Preview",
        "description": "Get pricing preview for billing",
        "tags": ["Billing"],
        "responses": {
          "200": {
            "description": "Pricing information",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PricingPreview"
                }
              }
            }
          }
        }
      }
    },
    "/api/billing/pricing": {
      "get": {
        "summary": "Get Pricing Configuration",
        "description": "Retrieve pricing configuration (admin only)",
        "tags": ["Billing"],
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "Pricing configuration",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PricingConfig"
                }
              }
            }
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          }
        }
      },
      "post": {
        "summary": "Update Pricing",
        "description": "Update pricing configuration (admin only)",
        "tags": ["Billing"],
        "security": [{"bearerAuth": []}],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PricingUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Pricing updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PricingConfig"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          }
        }
      }
    },
    "/api/billing/pricing/{locale}": {
      "delete": {
        "summary": "Delete Pricing",
        "description": "Delete pricing for a specific locale (admin only)",
        "tags": ["Billing"],
        "security": [{"bearerAuth": []}],
        "parameters": [
          {
            "name": "locale",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Locale code (e.g., 'en', 'fr')"
          }
        ],
        "responses": {
          "204": {
            "description": "Pricing deleted"
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/api/admin/insights": {
      "get": {
        "summary": "Admin Insights",
        "description": "Get comprehensive system insights (admin only)",
        "tags": ["Admin"],
        "security": [{"bearerAuth": []}],
        "responses": {
          "200": {
            "description": "System insights",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminInsights"
                }
              }
            }
          },
          "403": {
            "$ref": "#/components/responses/Forbidden"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "Bookmark": {
        "type": "object",
        "properties": {
          "bookmarkId": {
            "type": "string",
            "description": "Unique bookmark identifier"
          },
          "url": {
            "type": "string",
            "format": "uri",
            "description": "Bookmark URL"
          },
          "title": {
            "type": "string",
            "description": "Bookmark title"
          },
          "description": {
            "type": "string",
            "description": "Bookmark description"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Bookmark tags"
          },
          "folder": {
            "type": "string",
            "description": "Folder/category"
          },
          "faviconUrl": {
            "type": "string",
            "format": "uri",
            "description": "Favicon URL"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Creation timestamp"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Last update timestamp"
          }
        },
        "required": ["bookmarkId", "url"]
      },
      "BookmarkInput": {
        "type": "object",
        "properties": {
          "url": {
            "type": "string",
            "format": "uri",
            "description": "Bookmark URL"
          },
          "title": {
            "type": "string",
            "description": "Bookmark title"
          },
          "description": {
            "type": "string",
            "description": "Bookmark description"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Bookmark tags"
          },
          "folder": {
            "type": "string",
            "description": "Folder/category"
          }
        },
        "required": ["url"]
      },
      "HistoryEntry": {
        "type": "object",
        "properties": {
          "historyId": {
            "type": "string",
            "description": "Unique history entry identifier"
          },
          "url": {
            "type": "string",
            "format": "uri",
            "description": "Visited URL"
          },
          "title": {
            "type": "string",
            "description": "Page title"
          },
          "visitCount": {
            "type": "integer",
            "description": "Number of visits"
          },
          "lastVisit": {
            "type": "string",
            "format": "date-time",
            "description": "Last visit timestamp"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "First visit timestamp"
          }
        },
        "required": ["historyId", "url"]
      },
      "Tab": {
        "type": "object",
        "properties": {
          "tabId": {
            "type": "string",
            "description": "Unique tab identifier"
          },
          "url": {
            "type": "string",
            "format": "uri",
            "description": "Current URL"
          },
          "title": {
            "type": "string",
            "description": "Page title"
          },
          "favicon": {
            "type": "string",
            "description": "Favicon data URL"
          },
          "loading": {
            "type": "boolean",
            "description": "Loading state"
          },
          "canGoBack": {
            "type": "boolean",
            "description": "Can navigate back"
          },
          "canGoForward": {
            "type": "boolean",
            "description": "Can navigate forward"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Tab creation timestamp"
          }
        },
        "required": ["tabId"]
      },
      "TabInput": {
        "type": "object",
        "properties": {
          "url": {
            "type": "string",
            "format": "uri",
            "description": "Initial URL"
          },
          "title": {
            "type": "string",
            "description": "Tab title"
          }
        }
      },
      "Session": {
        "type": "object",
        "properties": {
          "sessionId": {
            "type": "string",
            "description": "Unique session identifier"
          },
          "name": {
            "type": "string",
            "description": "Session name"
          },
          "tabs": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Tab"
            },
            "description": "Session tabs"
          },
          "windows": {
            "type": "array",
            "items": {
              "type": "object",
              "description": "Window configuration"
            },
            "description": "Session windows"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Session creation timestamp"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Session last update timestamp"
          }
        },
        "required": ["sessionId"]
      },
      "SessionInput": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Session name"
          },
          "tabs": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/TabInput"
            },
            "description": "Session tabs"
          },
          "windows": {
            "type": "array",
            "items": {
              "type": "object",
              "description": "Window configuration"
            },
            "description": "Session windows"
          }
        },
        "required": ["name"]
      },
      "Settings": {
        "type": "object",
        "description": "User settings object",
        "properties": {
          "theme": {
            "type": "string",
            "enum": ["light", "dark", "auto"],
            "description": "UI theme"
          },
          "language": {
            "type": "string",
            "description": "Preferred language code"
          },
          "privacy": {
            "type": "object",
            "properties": {
              "blockTrackers": {
                "type": "boolean",
                "description": "Block tracking scripts"
              },
              "clearHistoryOnExit": {
                "type": "boolean",
                "description": "Clear history when closing"
              }
            }
          },
          "performance": {
            "type": "object",
            "properties": {
              "hardwareAcceleration": {
                "type": "boolean",
                "description": "Enable hardware acceleration"
              },
              "preloadPages": {
                "type": "boolean",
                "description": "Preload linked pages"
              }
            }
          }
        }
      },
      "SearchResults": {
        "type": "object",
        "properties": {
          "query": {
            "type": "string",
            "description": "Original search query"
          },
          "total": {
            "type": "integer",
            "description": "Total number of results"
          },
          "bookmarks": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Bookmark"
            },
            "description": "Bookmark search results"
          },
          "history": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/HistoryEntry"
            },
            "description": "History search results"
          },
          "tabs": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Tab"
            },
            "description": "Tab search results"
          }
        }
      },
      "FileInfo": {
        "type": "object",
        "properties": {
          "fileId": {
            "type": "string",
            "description": "Unique file identifier"
          },
          "originalName": {
            "type": "string",
            "description": "Original filename"
          },
          "secureName": {
            "type": "string",
            "description": "Secure filename on server"
          },
          "size": {
            "type": "integer",
            "description": "File size in bytes"
          },
          "mimetype": {
            "type": "string",
            "description": "MIME type"
          },
          "extension": {
            "type": "string",
            "description": "File extension"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Upload timestamp"
          }
        },
        "required": ["fileId", "originalName", "size"]
      },
      "UploadResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "Success message"
          },
          "files": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/FileInfo"
            },
            "description": "Uploaded files information"
          },
          "errors": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Upload errors"
          }
        }
      },
      "PricingPreview": {
        "type": "object",
        "properties": {
          "locale": {
            "type": "string",
            "description": "Pricing locale"
          },
          "currency": {
            "type": "string",
            "description": "Currency code"
          },
          "unitAmount": {
            "type": "number",
            "description": "Price per unit"
          },
          "interval": {
            "type": "string",
            "enum": ["day", "week", "month", "year"],
            "description": "Billing interval"
          },
          "priceId": {
            "type": "string",
            "description": "Stripe price ID"
          },
          "productName": {
            "type": "string",
            "description": "Product name"
          }
        }
      },
      "PricingConfig": {
        "type": "object",
        "properties": {
          "overrides": {
            "type": "object",
            "description": "Custom pricing overrides"
          },
          "defaults": {
            "type": "object",
            "description": "Default pricing configuration"
          }
        }
      },
      "PricingUpdate": {
        "type": "object",
        "properties": {
          "locale": {
            "type": "string",
            "description": "Locale code"
          },
          "priceId": {
            "type": "string",
            "description": "Stripe price ID"
          },
          "currency": {
            "type": "string",
            "description": "Currency code"
          },
          "unitAmount": {
            "type": "number",
            "description": "Price per unit"
          },
          "interval": {
            "type": "string",
            "enum": ["day", "week", "month", "year"],
            "description": "Billing interval"
          }
        },
        "required": ["locale", "priceId", "currency", "unitAmount", "interval"]
      },
      "HealthResponse": {
        "type": "object",
        "properties": {
          "status": {
            "type": "string",
            "enum": ["healthy", "degraded", "critical"],
            "description": "System health status"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "Response timestamp"
          },
          "uptimeSeconds": {
            "type": "integer",
            "description": "System uptime in seconds"
          },
          "requests": {
            "type": "integer",
            "description": "Total request count"
          },
          "errors": {
            "type": "integer",
            "description": "Total error count"
          },
          "rateLimited": {
            "type": "integer",
            "description": "Rate limited requests count"
          },
          "avgResponseTimeMs": {
            "type": "number",
            "description": "Average response time in milliseconds"
          },
          "memory": {
            "type": "object",
            "description": "Memory usage statistics"
          },
          "connections": {
            "type": "object",
            "properties": {
              "active": {
                "type": "integer",
                "description": "Active connections"
              },
              "peak": {
                "type": "integer",
                "description": "Peak connections"
              }
            }
          },
          "compressionCache": {
            "type": "object",
            "description": "Compression cache statistics"
          },
          "version": {
            "type": "string",
            "description": "Server version"
          },
          "metrics": {
            "type": "object",
            "properties": {
              "server": {
                "type": "object",
                "description": "Server metrics"
              },
              "system": {
                "type": "object",
                "description": "System metrics"
              }
            }
          },
          "thresholds": {
            "type": "object",
            "description": "Health check thresholds"
          },
          "environment": {
            "type": "object",
            "properties": {
              "nodeVersion": {
                "type": "string",
                "description": "Node.js version"
              },
              "pid": {
                "type": "integer",
                "description": "Process ID"
              }
            }
          }
        }
      },
      "AdminInsights": {
        "type": "object",
        "properties": {
          "server": {
            "type": "object",
            "description": "Server statistics"
          },
          "rateLimiting": {
            "type": "object",
            "description": "Rate limiting statistics"
          },
          "monitoring": {
            "type": "object",
            "description": "Monitoring data"
          },
          "alerts": {
            "type": "array",
            "items": {
              "type": "object",
              "description": "Active alerts"
            }
          },
          "traces": {
            "type": "array",
            "items": {
              "type": "object",
              "description": "Recent traces"
            }
          },
          "notifications": {
            "type": "object",
            "description": "Notification statistics"
          }
        }
      },
      "Error": {
        "type": "object",
        "properties": {
          "error": {
            "type": "string",
            "description": "Error message"
          },
          "code": {
            "type": "string",
            "description": "Error code"
          },
          "requestId": {
            "type": "string",
            "description": "Request ID for tracking"
          }
        },
        "required": ["error"]
      }
    },
    "responses": {
      "BadRequest": {
        "description": "Bad Request",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      },
      "Unauthorized": {
        "description": "Unauthorized",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      },
      "Forbidden": {
        "description": "Forbidden",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      },
      "NotFound": {
        "description": "Not Found",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      }
    },
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      },
      "apiKeyAuth": {
        "type": "apiKey",
        "in": "header",
        "name": "X-API-Key"
      }
    }
  }
}
